<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="972" height="668"><defs/><g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 8 8 L 960 8 L 960 656 L 8 656 L 8 8" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 8 8 L 8 30 L 246.5361328125 30 L 257.5361328125 19 L 257.5361328125 8 L 8 8"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 8 8 L 8 30 L 246.5361328125 30 L 257.5361328125 19 L 257.5361328125 8 L 8 8 L 8 8" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="48.6181640625" y="25.5">Support for Structural Constraints</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="13" y="25.5">class</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="#C0C0C0" stroke="none" d="M 496.160400390625 202.5 C 496.160400390625 196.1487248 501.309125190625 191 507.660400390625 191 C 514.011675590625 191 519.160400390625 196.1487248 519.160400390625 202.5 C 519.160400390625 208.8512752 514.011675590625 214 507.660400390625 214 C 501.309125190625 214 496.160400390625 208.8512752 496.160400390625 202.5 Z" opacity="0.2"/></g><g transform="translate(2,2) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 489.160400390625 195.5 C 489.160400390625 189.1487248 494.309125190625 184 500.660400390625 184 C 507.011675590625 184 512.160400390625 189.1487248 512.160400390625 195.5 C 512.160400390625 201.8512752 507.011675590625 207 500.660400390625 207 C 494.309125190625 207 489.160400390625 201.8512752 489.160400390625 195.5 Z"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 489.160400390625 195.5 C 489.160400390625 189.1487248 494.309125190625 184 500.660400390625 184 C 507.011675590625 184 512.160400390625 189.1487248 512.160400390625 195.5 C 512.160400390625 201.8512752 507.011675590625 207 500.660400390625 207 C 494.309125190625 207 489.160400390625 201.8512752 489.160400390625 195.5 Z" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="476.818603515625" y="226.5">Drawing</text></g></g><g transform="translate(2,2) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="383" y="407" width="73.32080078125" height="48" opacity="0.2"/></g><g transform="translate(2,2) scale(1,1)"><rect fill="#d8f2ff" stroke="none" x="376" y="400" width="73.32080078125" height="48"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 376 400 L 449.32080078125 400 L 449.32080078125 448 L 376 448 L 376 400 Z Z" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="380.5" y="417.5">«interface»</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="396.40087890625" y="432.5">Layer</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 520 432 L 845 432 L 855 442 L 855 526 L 520 526 L 520 432"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 520 432 L 845 432 L 855 442 L 855 526 L 520 526 L 520 432 L 520 432" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 845 432 L 845 442 L 855 442 L 845 432" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="450">{~~ A layer can only be added as a child to a</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="463">LayeredDrawing or to a Clipping.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="480">inv Layer.getParent() = null or</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="493">Layer.getParent().isInstanceOf(LayeredDrawing) or</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="506">Layer.getParent().isInstanceOf(Clipping)  </text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="525" y="521">}</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 519 445 L 450 432" stroke-miterlimit="10" stroke-dasharray="3"/></g><g transform="translate(2,2) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="295" y="55" width="279.63232421875" height="90" opacity="0.2"/></g><g transform="translate(2,2) scale(1,1)"><rect fill="#ffd8d8" stroke="none" x="288" y="48" width="279.63232421875" height="90"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 288 48 L 567.63232421875 48 L 567.63232421875 138 L 288 138 L 288 48 Z Z" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 288 86 L 567.63232421875 86" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="395.65576171875" y="65.5">«interface»</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="409.39208984375" y="80.5">Figure</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="293" y="103.5">+isSuitableParent(newParent: Figure): boolean</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="293" y="118.5">+isSuitableChild(newChild: Figure): boolean</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 484 183 L 456 139" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="#FFFFFF" stroke="none" d="M 474.01499815772235 151.6277409451279 L 456 139 L 459.8093661070217 160.66768861375562"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 474.01499815772235 151.6277409451279 L 456 139 L 459.8093661070217 160.66768861375562 L 474.01499815772235 151.6277409451279" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="511" y="271" width="110.1435546875" height="48" opacity="0.2"/></g><g transform="translate(2,2) scale(1,1)"><rect fill="#ffffd8" stroke="none" x="504" y="264" width="110.1435546875" height="48"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 504 264 L 614.1435546875 264 L 614.1435546875 312 L 504 312 L 504 264 Z Z" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="526.911376953125" y="281.5">«interface»</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="511.740478515625" y="296.5">LayeredDrawing</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 413 399 L 425 139" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="#FFFFFF" stroke="none" d="M 432.47298728772927 159.69189360588916 L 425 139 L 415.65282170255944 158.91557827118902"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 432.47298728772927 159.69189360588916 L 425 139 L 415.65282170255944 158.91557827118902 L 432.47298728772927 159.69189360588916" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 541 263 L 505.6842105263158 207" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="#ffffff" stroke="none" d="M 648 264 L 933 264 L 943 274 L 943 343 L 648 343 L 648 264"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 648 264 L 933 264 L 943 274 L 943 343 L 648 343 L 648 264 L 648 264" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 933 264 L 933 274 L 943 274 L 933 264" stroke-miterlimit="10"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="653" y="282">{~~ A LayeredDrawing only accepts Layers as</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="653" y="295">children.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="653" y="312">inv</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="653" y="325">LayeredDrawing.getChildren()-&gt;forAll(child|child</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="653" y="338">instanceof Layer)}</text></g></g><g transform="translate(2,2) scale(1,1)"><path fill="none" stroke="#000000" d="M 647 294 L 615 292" stroke-miterlimit="10" stroke-dasharray="3"/></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="74">In some drawings, we have structural</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="87">constraints.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="102">.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="117">For example, we may have a</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="130">LayeredDrawing (yellow) which requires</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="143">that its children are Layers (blue).</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="158">In this case, it is not permitted, to directly</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="171">add a RectangleFigure as a child to a</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="184">LayeredDrawing.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="199">.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="214">To support structural constraints, the</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="227">Figure interface (red) provides the</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="240">methods isSuitableParent,</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="253">isSuitableChild.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="255">.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="270">Editing functions use these methods to</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="283">determine which figures the user may</text><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="37" y="296">add as a child to another figure.</text></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/></g></g><g transform="translate(2,2) scale(1,1)"><g><path fill="none" stroke="none"/></g></g></g></svg>